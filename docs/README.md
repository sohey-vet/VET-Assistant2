# VET-Assistant2 - X投稿案自動生成ツール（重複監視強化版）

獣医師向けX投稿案を自動生成する高精度デスクトップアプリケーションです。

## 🚀 新機能：AI駆動型コンテンツ生成システム

- **🤖 AI による高品質投稿生成**: 獣医師レベルの専門的で魅力的な投稿を自動生成
- **📚 週テーマ別コンテンツ**: 参加型・猫種特集・専門テーマ・健康管理の4つのテーマ
- **🔄 インテリジェント重複監視**: 過去3-24か月の投稿との内容重複を厳重に監視
- **📤 Googleスプレッドシート連携**: 生成した投稿を自動でGoogleスプレッドシートにアップロード
- **🎯 詳細設定**: 猫種・医学テーマ・管理領域などの詳細設定が可能

## 📋 主要機能

- **重複監視付き投稿生成**: 過去投稿との重複を完全防止
- **Xアーカイブ自動解析**: tweets.jsファイルから既存投稿を自動読み込み
- **猫・犬投稿の自動生成**: 専門性と親しみやすさを両立
- **CSV形式出力**: 投稿スケジュールをExcel等で編集可能
- **リアルタイム重複ログ**: 重複検出プロセスを詳細表示

## 🛠️ インストール・セットアップ

### 初回セットアップ
1. `setup.bat` をダブルクリック（必要なライブラリを自動インストール）

### アプリケーション起動
- **AI強化版（推奨）**: `run_enhanced.bat` をダブルクリック

## 📖 使い方

1. アプリケーションを起動
2. tweets.jsファイルパスが自動設定済み
3. 生成日数を入力（デフォルト：7日）
4. 週テーマを選択
5. 重複チェック設定を確認：
   - **重複チェック期間**: 3-24か月前まで
   - **類似度閾値**: 50-80%で重複判定
6. 「🚀 重複監視付き生成開始」ボタンをクリック
7. `output/` フォルダにCSVファイルが生成

## 📊 出力仕様

### ファイル形式
- `enhanced_posts_YYYY-MM-DD_[テーマ].csv`

### 列構成
- `投稿日時`: YYYY-MM-DD HH:MM 形式
- `投稿内容`: 140文字以内の投稿テキスト
- `文字数`: 正確な文字数

### 投稿スケジュール
- **07:00**: 猫の投稿（#猫のあれこれ）
- **18:00**: 犬の投稿（#獣医が教える犬のはなし）

## 🎯 重複監視システムの特徴

### 高精度重複検出
- **完全一致**: ハッシュ値による瞬時の重複判定
- **類似度判定**: 文字列・キーワード・主要ポイントの総合評価
- **動物種別**: 猫・犬の投稿を分けて比較

### 自動再生成
- 重複検出時は最大5回まで自動再生成
- 試行ごとに詳細なログを記録
- 段階的な内容変更で重複回避

### 履歴管理
- SQLiteデータベースで投稿履歴を永続保存
- 投稿内容・キーワード・統計情報を構造化管理
- 古い投稿の自動削除機能

## 📁 ファイル構成

```
VET-Assistant2/
├── enhanced_post_generator.py      # 強化版メインファイル（推奨）
├── advanced_duplicate_monitor.py   # 重複監視システム
├── test_duplicate_prevention.py    # テストスイート
├── run_enhanced.bat                # 強化版起動ファイル
├── setup.bat                       # 初回セットアップ
├── requirements.txt                # 必要ライブラリ
├── output/                         # CSV出力フォルダ
└── README.md                       # このファイル
```

## 🔧 システム要件

- Python 3.7以上
- Windows 10/11
- 必要ライブラリ：tkinter, sqlite3, pandas, hashlib

## 📝 投稿例

### 猫投稿（質問型）
```
獣医師に教えて！愛猫の寝る場所は？😴

【質問】あなたの猫ちゃんはどこで寝ることが多いですか？

①飼い主のベッド
②専用ベッド
③段ボール箱
④高い場所
⑤その他（教えて！）

場所選びにも理由があるんです♪
#猫のあれこれ
```

### 犬投稿（ケーススタディ）
```
【ケース①：散歩の変化】

症例：6歳のラブラドール
最近、散歩中に立ち止まることが多くなった。
以前は元気に走っていたのに、歩くペースも遅くなった🐕

考えられる原因は？
（実際によくある相談です）
#獣医が教える犬のはなし
```

## 🧪 テスト機能

`test_duplicate_prevention.py` で重複防止機能の動作確認が可能です：

```bash
python test_duplicate_prevention.py
```

## 📞 サポート

問題が発生した場合は、エラーメッセージと実行環境をお知らせください。

---

**推奨**: 重複のない高品質な投稿生成には `run_enhanced.bat` をご利用ください。